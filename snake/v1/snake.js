var g={w:15,h:15},s=new Snake(),b=g.w*g.h,cD=[0,0];function gridCalc(x, y){return x*y;}function update(death){var a=document.getElementById('area');a.innerHTML='';if(!death){for(let i=1;i<=b;i++){if(i==s.p){if(i==s.f)s.feed();for(let j=0;j<s.tail.length;j++){if(i==s.tail[j]){return update(true);}}a.innerHTML+=`<div class='snake'></div>`;}else{var check=false;for(let j=0;j<s.tail.length;j++){if(i==s.tail[j]){check=true;if(i==s.f){a.innerHTML+=`<div class='tail food'></div>`;}else a.innerHTML+=`<div class='tail'></div>`;}}if(i==s.f&&!check){check=true;a.innerHTML+=`<div class='food'></div>`;}if(!check)a.innerHTML+=`<div></div>`;}}}else{s.death();s.feed();document.getElementById('record').innerHTML=s.record;update(false);}}function nD(e){if(!e.key.match(/^Arrow/))return;var eFix=e.key.slice('Arrow'.length);if(eFix=='Up'&&s.d[1]!==1&&cD[1]==0){cD[0]++;s.d=[0,-1];}else if(eFix=='Down'&&s.d[1]!==-1&&cD[1]==0){cD[0]++;s.d=[0,1];}else if(eFix=='Left'&&s.d[0]!==1&&cD[0]==0){cD[1]++;s.d=[-1,0];}else if(eFix=='Right'&&s.d[0]!==-1&&cD[0]==0){cD[1]++;s.d=[1,0];}}window.addEventListener('keydown',(e)=>{nD(e);});function init(){document.body.innerHTML=`<header><h1>SnakeJS by Lasse Brustad</h1></header><style>main.play{grid-template-columns:repeat(`+g.w+`,20px);grid-template-rows:repeat(`+g.h+`,20px);}</style><main id='area' class='play'></main><footer><p>Current length: <span id="length">0</span></p><p>Record: <span id="record">0</span></p></footer>`;update(true);setInterval(()=>{s.move();},300);}setTimeout(init,50);